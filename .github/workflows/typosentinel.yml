name: TypoSentinel Security Scan

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  typosentinel-scan:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup TypoSentinel
      run: |
        # Download and install TypoSentinel
        curl -sSL https://install.typosentinel.com | bash
        
    - name: Run Security Scan
      run: |
        typosentinel scan --format json --output scan-results.json
        
    - name: Upload Scan Results
      uses: actions/upload-artifact@v3
      with:
        name: typosentinel-results
        path: scan-results.json
        
    - name: Comment PR with Results
      if: github.event_name == 'pull_request'
      run: |
        # Add scan results as PR comment
        echo "TypoSentinel scan completed. Check artifacts for detailed results."
