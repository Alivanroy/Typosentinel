# TypoSentinel Debug Configuration Example
# This configuration demonstrates the enhanced logging and debug capabilities

# Core application settings
core:
  environment: "development"
  debug: true
  max_workers: 4
  timeout: "10m"
  temp_dir: "/tmp/typosentinel"

# Enhanced logging configuration with debug modes
logging:
  level: "debug"          # trace, verbose, debug, info, warn, error, fatal
  format: "json"          # text, json
  output: "stdout"        # stdout, stderr, file path
  timestamp: true
  caller: true
  prefix: "[TypoSentinel]"
  
  # Log rotation settings (when output is a file)
  rotation:
    enabled: true
    max_size: 100          # MB
    max_backups: 5
    max_age: 30            # days

# Cache configuration for improved performance
cache:
  enabled: true
  type: "memory"           # memory, redis, file
  ttl: "1h"               # cache time-to-live
  max_size: 1000          # maximum number of cached items
  cache_dir: "./.cache"   # directory for file-based cache
  redis_url: "redis://localhost:6379/0"  # Redis connection URL
  compression: true       # compress cached data
  encryption: false       # encrypt cached data

# API configuration
api:
  enabled: true
  host: "localhost"
  port: 8080
  timeout: "30s"
  rate_limit: 100
  cors_enabled: true
  cors_origins: ["*"]
  tls_enabled: false
  cert_file: ""
  key_file: ""

# Database configuration
database:
  enabled: true
  type: "sqlite"
  connection_string: "./typosentinel.db"
  max_connections: 10
  connection_timeout: "30s"
  query_timeout: "10s"
  auto_migrate: true
  log_queries: true        # Enable for debug mode

# Static analysis configuration
static_analysis:
  enabled: true
  scan_scripts: true
  scan_manifests: true
  yara_rules_path: "./rules/yara"
  timeout: "5m"
  max_file_size: 10485760  # 10MB
  
  # Debug-specific settings
  verbose_output: true
  save_intermediate_results: true
  detailed_ast_analysis: true

# Dynamic analysis configuration
dynamic_analysis:
  enabled: true
  sandbox_type: "docker"
  sandbox_image: "typosentinel/sandbox:latest"
  timeout: "10m"
  execute_install_scripts: true
  monitor_network_activity: true
  monitor_file_activity: true
  monitor_process_activity: true
  max_execution_time: "5m"
  
  # Debug-specific settings
  save_sandbox_logs: true
  preserve_sandbox_on_error: true
  detailed_monitoring: true

# Machine Learning analysis configuration
ml_analysis:
  enabled: true
  model_path: "./models/typo_detection.model"
  threshold: 0.7
  feature_count: 1000
  batch_size: 32
  
  # Debug-specific settings
  save_feature_vectors: true
  detailed_predictions: true
  model_explanation: true

# Software provenance analysis configuration
provenance_analysis:
  enabled: true
  sigstore_enabled: true
  sigstore_rekor_url: "https://rekor.sigstore.dev"
  sigstore_fulcio_url: "https://fulcio.sigstore.dev"
  sigstore_ctlog_url: "https://ctfe.sigstore.dev"
  slsa_enabled: true
  slsa_min_level: 2
  slsa_required_builders: []
  verify_signatures: true
  verify_provenance: true
  verify_integrity: true
  require_transparency_log: true
  trusted_publishers: []
  trusted_signers: []
  trusted_builders: []
  timeout: "2m"
  retry_attempts: 3
  
  # Debug-specific settings
  save_verification_logs: true
  detailed_chain_validation: true

# Detection configuration
detection:
  similarity_threshold: 0.8
  levenshtein_threshold: 2
  jaro_winkler_threshold: 0.9
  phonetic_matching: true
  keyboard_layout_analysis: true
  unicode_confusable_detection: true
  homograph_detection: true
  
  # Debug-specific settings
  save_similarity_matrices: true
  detailed_matching_logs: true

# Registry configuration
registry:
  npm:
    enabled: true
    base_url: "https://registry.npmjs.org"
    timeout: "30s"
    rate_limit: 100
    cache_enabled: true
    
  pypi:
    enabled: true
    base_url: "https://pypi.org"
    timeout: "30s"
    rate_limit: 100
    cache_enabled: true
    
  go:
    enabled: true
    base_url: "https://proxy.golang.org"
    timeout: "30s"
    rate_limit: 100
    cache_enabled: true

# Policy configuration
policy:
  enabled: true
  policy_file: "./policies/default.yaml"
  strict_mode: false
  auto_update: true
  
  # Debug-specific settings
  log_policy_decisions: true
  save_policy_evaluation_trace: true

# Scanner configuration
scanner:
  max_concurrent_scans: 5
  default_timeout: "15m"
  retry_attempts: 3
  retry_delay: "30s"
  
  # Debug-specific settings
  save_scan_artifacts: true
  detailed_timing_info: true
  memory_profiling: true
  cpu_profiling: false

# Example debug mode configurations
# These can be set via CLI flags:
# --debug-mode=basic      # Basic debug information
# --debug-mode=verbose    # Verbose logging with context
# --debug-mode=trace      # Full trace with function calls
# --debug-mode=performance # Performance monitoring
# --debug-mode=security   # Security-focused debugging

# Example CLI usage with debug modes:
# typosentinel scan lodash --debug
# typosentinel scan lodash --verbose
# typosentinel scan lodash --trace
# typosentinel scan lodash --debug-mode=performance
# typosentinel scan lodash --log-level=trace --log-format=json
# typosentinel scan lodash --log-output=./logs/scan.log